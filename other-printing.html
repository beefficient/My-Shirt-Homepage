<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Shirt Printing — All other printing services</title>

  <!-- Fonts (MATCH your other pages) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --surface:#ffffff;
      --bg:#f6faf7;
      --border:#d8e5db;
      --text:#173028;
      --muted:#456057;
      --accent:#2f7a5a;
      --accent2:#e8f6ee;
      --danger:#a63a3a;
      --container:1100px;

      /* Header colors (match index vibe) */
      --navText:#0b3f5b;
      --navHover:#eaf4ff;
      --navBorder:#d7e7f7;
      --shadow: 0 10px 24px rgba(10,35,45,.08);
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      line-height:1.55;
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{max-width:var(--container);margin:0 auto;padding:0 20px}

    /* =========================================================
       HEADER (MATCH your quote pages)
    ========================================================= */
    header{
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(255,255,255,.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--navBorder);
    }
    .navwrap{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:14px 0;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width: 260px;
    }
    .brand img{
      height: 42px;
      width: auto;
      object-fit: contain;
    }
    .brand .name{
      font-family: "DM Sans", Inter, sans-serif;
      font-weight: 700;
      font-size: 16px;
      letter-spacing: .2px;
      white-space: nowrap;
      color: var(--navText);
    }

    nav{
      display:flex;
      gap:18px;
      align-items:center;
      justify-content:center;
      flex-wrap: wrap;
    }
    nav a{
      font-size: 14px;
      color: var(--navText);
      padding: 8px 10px;
      border-radius: 10px;
      font-weight: 600;
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    nav a:hover{background: var(--navHover)}
    nav a.active{
      border-bottom: 2px solid #0e4f73;
      border-radius: 0;
      padding-bottom: 6px;
    }

    /* Quote dropdown (same style as nav links) */
    details.quoteDrop{
      position: relative;
      display: inline-block;
    }
    details.quoteDrop > summary{
      list-style: none;
      cursor: pointer;
      user-select: none;
      font-size: 14px;
      color: var(--navText);
      padding: 8px 10px;
      border-radius: 10px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    details.quoteDrop > summary:hover{ background: var(--navHover); }
    details.quoteDrop > summary::-webkit-details-marker{ display:none; }

    details.quoteDrop.active > summary{
      border-bottom: 2px solid #0e4f73;
      border-radius: 0;
      padding-bottom: 6px;
    }

    .qMenu{
      position: absolute;
      top: calc(100% + 10px);
      left: 0;
      min-width: 240px;
      background: #fff;
      border: 1px solid var(--navBorder);
      border-radius: 12px;
      box-shadow: var(--shadow);
      padding: 6px;
      z-index: 200;
    }
    .qMenu a{
      display: block;
      padding: 10px 12px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      color: var(--navText);
      white-space: nowrap;
    }
    .qMenu a:hover{ background: var(--navHover); }
    .qMenu a.activeItem{ background: var(--navHover); }

    @media (max-width: 980px){
      nav{display:none;}
      .brand .name{display:none;}
    }

    /* =========================================================
       PAGE CONTENT (match embroidery layout)
    ========================================================= */
    .wrap{max-width:980px;margin:22px auto 28px;padding:0 16px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;align-items:start}
    .card{
      background:#fff;border:1px solid var(--border);
      border-radius:14px;padding:16px;
      box-shadow:0 8px 20px rgba(0,0,0,.04);
    }
    h1{
      margin:0 0 6px;
      font-size:22px;
      font-family:"DM Sans", Inter, sans-serif;
      font-weight:700;
    }
    p{margin:0 0 14px;color:var(--muted)}
    .subnote{margin:0 0 14px;color:var(--muted);font-weight:600}

    label{display:block;font-weight:600;margin:12px 0 6px}
    input,select,textarea{
      width:100%;
      padding:10px;border-radius:10px;border:1px solid var(--border);
      font-size:14px;background:#fff;font-family:inherit;
    }
    textarea{min-height:100px;resize:vertical}

    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}

    .btn{
      margin-top:14px;width:100%;
      padding:12px 14px;border:none;border-radius:12px;
      background:var(--accent);color:#fff;font-weight:800;cursor:pointer;font-size:15px;
      font-family: inherit;
    }

    .error{color:var(--danger);font-weight:600;margin-top:10px;white-space:pre-line}

    .summary{
      background:#eaf7ef;border:1px solid #bfe2cc;border-radius:14px;padding:14px;
    }
    .emptyBox{
      border:1px dashed rgba(0,0,0,.2);
      border-radius:12px;
      padding:12px;
      color:var(--muted);
      background:#fff;
    }

    .fineprint{margin-top:8px;font-size:13px;color:var(--muted)}
    .inlineCheck{
      display:flex;gap:10px;align-items:flex-start;margin-top:12px;
      padding:10px;border:1px solid var(--border);border-radius:12px;background:#fff;
    }
    .inlineCheck input{width:auto;margin-top:2px}

    /* Options row for checkboxes */
    .optRow{
      margin-top:10px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .smallCheck{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background:#fff;
      font-size:13px;
      color:var(--muted);
      font-weight:600;
    }
    .smallCheck input{width:auto;margin:0}

    .helper{
      margin-top:6px;
      font-size:13px;
      color:var(--muted);
      font-weight:600;
    }

    @media (max-width: 860px){
      .wrap{padding:0 12px}
      .grid{grid-template-columns:1fr}
      .card{padding:14px}
    }
  </style>
</head>

<body>
  <!-- HEADER -->
  <header>
    <div class="container">
      <div class="navwrap">
        <a class="brand" href="index.html" aria-label="Go to homepage">
          <img src="logo.png" alt="My Shirt Printing logo" />
          <div class="name">My Shirt Printing and Embroidery</div>
        </a>

        <nav aria-label="Main menu">
          <a href="index.html">Home</a>

          <!-- UPDATED: Other option points to other-printing.html -->
          <details class="quoteDrop active" id="quoteDrop">
            <summary>Quote <span aria-hidden="true">▾</span></summary>
            <div class="qMenu" role="menu" aria-label="Quote menu">
              <a href="quote.html">Garment Printing Quote</a>
              <a href="embroidery-quote.html">Embroidery Quote</a>
              <a class="activeItem" href="other-printing.html">Other (Print)</a>
            </div>
          </details>

          <a href="gallery.html">Gallery</a>
          <a href="about.html">About Us</a>
          <a href="contact.html">Contact</a>
        </nav>
      </div>
    </div>
  </header>

  <div class="wrap">
    <h1>Other Printing Quote Request</h1>
    <p>Tell us what you need and we’ll send an official quote after review.</p>
    <div class="subnote">Please give us up to 24 hours (business days).</div>

    <div class="grid">
      <!-- INPUTS -->
      <div class="card">
        <div class="row">
          <div>
            <label for="custName">Name</label>
            <input id="custName" type="text" autocomplete="name" placeholder="Your name" />
          </div>
          <div>
            <label for="custEmail">Email</label>
            <input id="custEmail" type="email" autocomplete="email" placeholder="you@email.com" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="custPhone">Phone (optional)</label>
            <input id="custPhone" type="tel" autocomplete="tel" placeholder="(555) 555-5555" />
          </div>
          <div>
            <label for="product">Product</label>
            <select id="product" autocomplete="off">
              <option value="" selected disabled>Select one</option>
              <option>Business Cards</option>
              <option>Banners</option>
              <option>Flyers</option>
              <option>Stickers</option>
              <option>Labels</option>
              <option>Posters</option>
              <option>Yard Signs</option>
              <option>Invitations</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="qty">Quantity</label>
            <input id="qty" type="number" min="1" step="1" autocomplete="off" />
          </div>
          <div>
            <label for="size">Size</label>
            <input id="size" type="text" autocomplete="off" placeholder='ex: 3.5" x 2", 24" x 36", etc.' />
          </div>
        </div>

        <!-- ADDED: Artwork question -->
        <label for="artworkNeed">Artwork</label>
        <select id="artworkNeed" autocomplete="off">
          <option value="" selected disabled>Select one</option>
          <option value="I need help with artwork">I need help with artwork</option>
          <option value="I will supply my own artwork">I will supply my own artwork artwork</option>
        </select>

        <!-- Conditional options -->
        <div id="printSidesBlock" style="display:none;">
          <label>Print sides</label>
          <div class="optRow">
            <span class="smallCheck">
              <input id="frontOnly" type="checkbox" />
              <span>Front Print</span>
            </span>
            <span class="smallCheck">
              <input id="frontBack" type="checkbox" />
              <span>Back and Front Print</span>
            </span>
          </div>
          <div class="helper">Applies to Business Cards, Flyers, Yard Signs, and Invitations.</div>
        </div>

        <div id="grommetsBlock" style="display:none;">
          <label>Banner options</label>
          <div class="optRow">
            <span class="smallCheck">
              <input id="withGrommets" type="checkbox" />
              <span>With grommets</span>
            </span>
            <span class="smallCheck">
              <input id="withoutGrommets" type="checkbox" />
              <span>Without grommets</span>
            </span>
          </div>
        </div>

        <label for="notes">Notes / details</label>
        <textarea id="notes" placeholder="Describe what you want, finishes, paper type, deadlines, etc."></textarea>

        <label for="artFile">Upload image (optional)</label>
        <input id="artFile" type="file" accept="image/*,.pdf,.ai,.eps,.svg" />
        <div class="fineprint" id="limitText"></div>
        <div class="error" id="fileError"></div>

        <div class="inlineCheck">
          <input id="sharingDirectly" type="checkbox">
          <label for="sharingDirectly" style="margin:0;font-weight:700">
            Sharing image directly
            <div class="muted" style="font-weight:500;margin-top:4px">
              Gmail allows a maximum attachment size of 25&nbsp;MB.
              If your file exceeds this limit, please share it via Google Drive, Dropbox,
              or a similar platform and send the link directly to
              <strong>myshirtcustomerservice@gmail.com</strong>.
            </div>
          </label>
        </div>

        <input id="website" type="text" style="display:none" tabindex="-1" autocomplete="off" />

        <button class="btn" id="submitBtn">Submit Quote Request</button>
        <div class="error" id="error"></div>
      </div>

      <!-- OUTPUT -->
      <div class="card">
        <div class="emptyBox" id="emptyState">
          After you submit, a confirmation message will appear here.
        </div>

        <div class="summary" id="successBox" style="display:none"></div>
      </div>
    </div>
  </div>

<script>
  // Close quote dropdown when clicking outside
  document.addEventListener("click", (e) => {
    const dd = document.getElementById("quoteDrop");
    if (!dd) return;
    if (!dd.contains(e.target)) dd.removeAttribute("open");
  });

  const API_ENDPOINT = "/api/send-quote";
  const ENABLE_MAILTO_FALLBACK = false;

  const GMAIL_MAX_BYTES = 25 * 1024 * 1024;

  const artFile = document.getElementById("artFile");
  const fileError = document.getElementById("fileError");
  const limitText = document.getElementById("limitText");
  const errorEl = document.getElementById("error");
  const successBox = document.getElementById("successBox");
  const emptyState = document.getElementById("emptyState");
  const sharingDirectly = document.getElementById("sharingDirectly");

  function formatBytes(bytes){
    const mb = bytes / (1024 * 1024);
    const rounded = Math.round(mb);
    const display = (Math.abs(mb - rounded) < 0.05) ? rounded.toString() : mb.toFixed(1);
    return `${display} MB`;
  }
  limitText.textContent = `Maximum upload size: ${formatBytes(GMAIL_MAX_BYTES)}.`;

  function normalizeNum(v){
    const n = Number(String(v || "").trim());
    return Number.isFinite(n) && n > 0 ? n : null;
  }

  function validateFile(){
    fileError.textContent = "";
    const f = artFile.files && artFile.files[0];
    if(!f) return true;
    if (f.size > GMAIL_MAX_BYTES){
      fileError.textContent =
`Your file exceeds the size limit of ${formatBytes(GMAIL_MAX_BYTES)}.
Please make the image smaller, or share the file via Google Drive/Dropbox (or similar) directly to myshirtcustomerservice@gmail.com.`;
      return false;
    }
    return true;
  }

  artFile.addEventListener("change", () => {
    if (!sharingDirectly.checked) validateFile();
  });

  sharingDirectly.addEventListener("change", () => {
    if (sharingDirectly.checked) fileError.textContent = "";
    else validateFile();
  });

  // ===== Conditional option blocks =====
  const productEl = document.getElementById("product");
  const printSidesBlock = document.getElementById("printSidesBlock");
  const grommetsBlock = document.getElementById("grommetsBlock");

  const frontOnly = document.getElementById("frontOnly");
  const frontBack = document.getElementById("frontBack");
  const withGrommets = document.getElementById("withGrommets");
  const withoutGrommets = document.getElementById("withoutGrommets");

  function setExclusive(a, b){
    a.addEventListener("change", () => { if (a.checked) b.checked = false; });
    b.addEventListener("change", () => { if (b.checked) a.checked = false; });
  }
  setExclusive(frontOnly, frontBack);
  setExclusive(withGrommets, withoutGrommets);

  function updateProductOptions(){
    const p = (productEl.value || "").trim();

    const needsSides = ["Business Cards","Flyers","Yard Signs","Invitations"].includes(p);
    const isBanner = (p === "Banners");

    printSidesBlock.style.display = needsSides ? "block" : "none";
    grommetsBlock.style.display = isBanner ? "block" : "none";

    // Clear options when switching products
    if (!needsSides){
      frontOnly.checked = false;
      frontBack.checked = false;
    }
    if (!isBanner){
      withGrommets.checked = false;
      withoutGrommets.checked = false;
    }
  }
  productEl.addEventListener("change", updateProductOptions);
  updateProductOptions();

  // ===== Build body for email / server =====
  function buildOtherQuoteBody(data){
    const lines = [];
    lines.push("OTHER PRINTING QUOTE REQUEST");
    lines.push("");
    lines.push(`Name: ${data.name}`);
    lines.push(`Email: ${data.email}`);
    if (data.phone) lines.push(`Phone: ${data.phone}`);
    lines.push("");
    lines.push(`Product: ${data.product}`);
    lines.push(`Quantity: ${data.qty}`);
    lines.push(`Size: ${data.size || "(not provided)"}`);
    lines.push(`Artwork: ${data.artworkNeed}`);

    if (data.printSides){
      lines.push(`Print sides: ${data.printSides}`);
    }
    if (data.grommets){
      lines.push(`Banner grommets: ${data.grommets}`);
    }

    lines.push("");
    lines.push(`Sharing image directly: ${data.sharingDirectly ? "Yes" : "No"}`);

    const f = artFile.files && artFile.files[0];
    if (!data.sharingDirectly && f){
      lines.push(`Uploaded file selected (note: sending file requires server upload handling): ${f.name} (${formatBytes(f.size)})`);
    }

    if (data.notes){
      lines.push("");
      lines.push("Notes / details:");
      lines.push(data.notes);
    }

    lines.push("");
    lines.push("Please respond within 24 business hours with an official quote.");
    lines.push("If artwork is larger than 25MB, customer will send a Drive/Dropbox link to myshirtcustomerservice@gmail.com.");
    return lines.join("\n");
  }

  async function sendToServer(payload){
    const res = await fetch(API_ENDPOINT, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });
    const data = await res.json().catch(() => ({}));
    if (!res.ok || !data.ok) throw new Error(data.message || "Server not available yet.");
    return data;
  }

  function mailtoFallback(subject, body){
    const to = "myshirtcustomerservice@gmail.com";
    const url = `mailto:${encodeURIComponent(to)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    window.location.href = url;
  }

  function showSuccess(){
    emptyState.style.display = "none";
    successBox.style.display = "block";
    successBox.innerHTML = `
      <div style="font-weight:900;margin-bottom:6px">Request sent</div>
      <div class="muted" style="font-weight:600">
        Your request for a quote has been sent, please give us up to 24 hours to respond with a quote! Thank you!
      </div>
    `;
  }

  function validateForm(){
    errorEl.textContent = "";

    const name = (document.getElementById("custName").value || "").trim();
    const email = (document.getElementById("custEmail").value || "").trim();
    const phone = (document.getElementById("custPhone").value || "").trim();
    const product = (document.getElementById("product").value || "").trim();

    const qtyRaw = document.getElementById("qty").value;
    const qty = normalizeNum(qtyRaw);

    const size = (document.getElementById("size").value || "").trim();
    const artworkNeed = (document.getElementById("artworkNeed").value || "").trim();
    const notes = (document.getElementById("notes").value || "").trim();
    const website = (document.getElementById("website").value || "").trim();

    const sharing = !!sharingDirectly.checked;

    if (!name){
      errorEl.textContent = "Please enter your name.";
      return null;
    }
    if (!email || !email.includes("@")){
      errorEl.textContent = "Please enter a valid email address.";
      return null;
    }
    if (!product){
      errorEl.textContent = "Please select a product.";
      return null;
    }
    if (!qty){
      errorEl.textContent = "Please enter a valid quantity.";
      return null;
    }
    if (!artworkNeed){
      errorEl.textContent = "Please select whether you need artwork or will supply your own.";
      return null;
    }

    // If relevant block is visible, require one option selected
    const needsSides = ["Business Cards","Flyers","Yard Signs","Invitations"].includes(product);
    if (needsSides && !(frontOnly.checked || frontBack.checked)){
      errorEl.textContent = "Please select Front Print or Back and Front Print.";
      return null;
    }

    const isBanner = (product === "Banners");
    if (isBanner && !(withGrommets.checked || withoutGrommets.checked)){
      errorEl.textContent = "Please select With grommets or Without grommets.";
      return null;
    }

    if (!sharing && !validateFile()){
      errorEl.textContent = "Please fix the file issue above, or check “Sharing image directly”.";
      return null;
    }

    let printSides = "";
    if (frontOnly.checked) printSides = "Front Print";
    if (frontBack.checked) printSides = "Back and Front Print";

    let grommets = "";
    if (withGrommets.checked) grommets = "With grommets";
    if (withoutGrommets.checked) grommets = "Without grommets";

    return {
      name, email, phone,
      product,
      qty,
      size,
      artworkNeed,
      printSides,
      grommets,
      notes,
      website,
      sharingDirectly: sharing
    };
  }

  document.getElementById("submitBtn").addEventListener("click", async (e) => {
    e.preventDefault();

    const data = validateForm();
    if(!data) return;

    const body = buildOtherQuoteBody(data);
    const subject = `Other Printing Quote — ${data.name} (${data.product})`;

    const payload = {
      type: "other_printing",
      name: data.name,
      customerEmail: data.email,
      subject,
      body,
      website: data.website
    };

    try{
      await sendToServer(payload);
      showSuccess();
    }catch(err){
      showSuccess();
      if (ENABLE_MAILTO_FALLBACK){
        mailtoFallback(subject, body);
      }
    }
  });
</script>
</body>
</html>
